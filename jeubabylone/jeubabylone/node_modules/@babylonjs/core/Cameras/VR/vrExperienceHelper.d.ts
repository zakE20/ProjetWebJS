import { Observable } from "../../Misc/observable";
import { Nullable } from "../../types";
import { Camera } from "../../Cameras/camera";
import { DeviceOrientationCamera } from "../../Cameras/deviceOrientationCamera";
import { VRDeviceOrientationFreeCamera } from "../../Cameras/VR/vrDeviceOrientationFreeCamera";
import { WebVROptions, WebVRFreeCamera } from "../../Cameras/VR/webVRCamera";
import { Scene } from "../../scene";
import { Vector3, Color3 } from "../../Maths/math";
import { WebVRController } from "../../Gamepads/Controllers/webVRController";
import { AbstractMesh } from "../../Meshes/abstractMesh";
import { Mesh } from "../../Meshes/mesh";
import { PickingInfo } from "../../Collisions/pickingInfo";
import { VRCameraMetrics } from '../../Cameras/VR/vrCameraMetrics';
import "../../Meshes/Builders/groundBuilder";
import "../../Meshes/Builders/torusBuilder";
import "../../Meshes/Builders/cylinderBuilder";
import "../../Gamepads/gamepadSceneComponent";
import "../../Animations/animatable";
/**
 * Options to modify the vr teleportation behavior.
 */
export interface VRTeleportationOptions {
    /**
     * The name of the mesh which should be used as the teleportation floor. (default: null)
     */
    floorMeshName?: string;
    /**
     * A list of meshes to be used as the teleportation floor. (default: empty)
     */
    floorMeshes?: Mesh[];
}
/**
 * Options to modify the vr experience helper's behavior.
 */
export interface VRExperienceHelperOptions extends WebVROptions {
    /**
     * Create a DeviceOrientationCamera to be used as your out of vr camera. (default: true)
     */
    createDeviceOrientationCamera?: boolean;
    /**
     * Create a VRDeviceOrientationFreeCamera to be used for VR when no external HMD is found. (default: true)
     */
    createFallbackVRDeviceOrientationFreeCamera?: boolean;
    /**
     * Uses the main button on the controller to toggle the laser casted. (default: true)
     */
    laserToggle?: boolean;
    /**
     * A list of meshes to be used as the teleportation floor. If specified, teleportation will be enabled (default: undefined)
     */
    floorMeshes?: Mesh[];
    /**
     * Distortion metrics for the fallback vrDeviceOrientationCamera (default: VRCameraMetrics.Default)
     */
    vrDeviceOrientationCameraMetrics?: VRCameraMetrics;
}
/**
 * Event containing information after VR has been entered
 */
export declare class OnAfterEnteringVRObservableEvent {
    /**
     * If entering vr was successful
     */
    success: boolean;
}
/**
 * Helps to quickly add VR support to an existing scene.
 * See http://doc.babylonjs.com/how_to/webvr_helper
 */
export declare class VRExperienceHelper {
    /** Options to modify the vr experience helper's behavior. */
    webVROptions: VRExperienceHelperOptions;
    private _scene;
    private _position;
    private _btnVR;
    private _btnVRDisplayed;
    private _webVRsupported;
    private _webVRready;
    private _webVRrequesting;
    private _webVRpresenting;
    private _hasEnteredVR;
    private _fullscreenVRpresenting;
    private _canvas;
    private _webVRCamera;
    private _vrDeviceOrientationCamera;
    private _deviceOrientationCamera;
    private _existingCamera;
    private _onKeyDown;
    private _onVrDisplayPresentChange;
    private _onVRDisplayChanged;
    private _onVRRequestPresentStart;
    private _onVRRequestPresentComplete;
    /**
     * Observable raised right before entering VR.
     */
    onEnteringVRObservable: Observable<VRExperienceHelper>;
    /**
     * Observable raised when entering VR has completed.
     */
    onAfterEnteringVRObservable: Observable<OnAfterEnteringVRObservableEvent>;
    /**
     * Observable raised when exiting VR.
     */
    onExitingVRObservable: Observable<VRExperienceHelper>;
    /**
     * Observable raised when controller mesh is loaded.
     */
    onControllerMeshLoadedObservable: Observable<WebVRController>;
    /** Return this.onEnteringVRObservable
     * Note: This one is for backward compatibility. Please use onEnteringVRObservable directly
     */
    readonly onEnteringVR: Observable<VRExperienceHelper>;
    /** Return this.onExitingVRObservable
     * Note: This one is for backward compatibility. Please use onExitingVRObservable directly
     */
    readonly onExitingVR: Observable<VRExperienceHelper>;
    /** Return this.onControllerMeshLoadedObservable
     * Note: This one is for backward compatibility. Please use onControllerMeshLoadedObservable directly
     */
    readonly onControllerMeshLoaded: Observable<WebVRController>;
    private _rayLength;
    private _useCustomVRButton;
    private _teleportationRequested;
    private _teleportActive;
    private _floorMeshName;
    private _floorMeshesCollection;
    private _rotationAllowed;
    private _teleportBackwardsVector;
    private _teleportationTarget;
    private _isDefaultTeleportationTarget;
    private _postProcessMove;
    private _teleportationFillColor;
    private _teleportationBorderColor;
    private _rotationAngle;
    private _haloCenter;
    private _cameraGazer;
    private _padSensibilityUp;
    private _padSensibilityDown;
    private _leftController;
    private _rightController;
    /**
     * Observable raised when a new mesh is selected based on meshSelectionPredicate
     */
    onNewMeshSelected: Observable<AbstractMesh>;
    /**
     * Observable raised when a new mesh is picked based on meshSelectionPredicate
     */
    onNewMeshPicked: Observable<PickingInfo>;
    private _circleEase;
    /**
     * Observable raised before camera teleportation
    */
    onBeforeCameraTeleport: Observable<Vector3>;
    /**
     *  Observable raised after camera teleportation
    */
    onAfterCameraTeleport: Observable<Vector3>;
    /**
    * Observable raised when current selected mesh gets unselected
    */
    onSelectedMeshUnselected: Observable<AbstractMesh>;
    private _raySelectionPredicate;
    /**
     * To be optionaly changed by user to define custom ray selection
     */
    raySelectionPredicate: (mesh: AbstractMesh) => boolean;
    /**
     * To be optionaly changed by user to define custom selection logic (after ray selection)
     */
    meshSelectionPredicate: (mesh: AbstractMesh) => boolean;
    /**
     * Set teleportation enabled. If set to false camera teleportation will be disabled but camera rotation will be kept.
     */
    teleportationEnabled: boolean;
    private _defaultHeight;
    private _teleportationInitialized;
    private _interactionsEnabled;
    private _interactionsRequested;
    private _displayGaze;
    private _displayLaserPointer;
    /**
     * The mesh used to display where the user is going to teleport.
     */
    /**
    * Sets the mesh to be used to display where the user is going to teleport.
    */
    teleportationTarget: Mesh;
    /**
     * The mesh used to display where the user is selecting, this mesh will be cloned and set as the gazeTracker for the left and right controller
     * when set bakeCurrentTransformIntoVertices will be called on the mesh.
     * See http://doc.babylonjs.com/resources/baking_transformations
     */
    gazeTrackerMesh: Mesh;
    /**
     * If the gaze trackers scale should be updated to be constant size when pointing at near/far meshes
     */
    updateGazeTrackerScale: boolean;
    /**
     * If the gaze trackers color should be updated when selecting meshes
     */
    updateGazeTrackerColor: boolean;
    /**
     * The gaze tracking mesh corresponding to the left controller
     */
    readonly leftControllerGazeTrackerMesh: Nullable<Mesh>;
    /**
     * The gaze tracking mesh corresponding to the right controller
     */
    readonly rightControllerGazeTrackerMesh: Nullable<Mesh>;
    /**
     * If the ray of the gaze should be displayed.
     */
    /**
    * Sets if the ray of the gaze should be displayed.
    */
    displayGaze: boolean;
    /**
     * If the ray of the LaserPointer should be displayed.
     */
    /**
    * Sets if the ray of the LaserPointer should be displayed.
    */
    displayLaserPointer: boolean;
    /**
     * The deviceOrientationCamera used as the camera when not in VR.
     */
    readonly deviceOrientationCamera: Nullable<DeviceOrientationCamera>;
    /**
     * Based on the current WebVR support, returns the current VR camera used.
     */
    readonly currentVRCamera: Nullable<Camera>;
    /**
     * The webVRCamera which is used when in VR.
     */
    readonly webVRCamera: WebVRFreeCamera;
    /**
     * The deviceOrientationCamera that is used as a fallback when vr device is not connected.
     */
    readonly vrDeviceOrientationCamera: Nullable<VRDeviceOrientationFreeCamera>;
    private readonly _teleportationRequestInitiated;
    /**
     * Defines wether or not Pointer lock should be requested when switching to
     * full screen.
     */
    requestPointerLockOnFullScreen: boolean;
    /**
     * Instantiates a VRExperienceHelper.
     * Helps to quickly add VR support to an existing scene.
     * @param scene The scene the VRExperienceHelper belongs to.
     * @param webVROptions Options to modify the vr experience helper's behavior.
     */
    constructor(scene: Scene, 
    /** Options to modify the vr experience helper's behavior. */
    webVROptions?: VRExperienceHelperOptions);
    private _onDefaultMeshLoaded;
    private _onResize;
    private _onFullscreenChange;
    /**
     * Gets a value indicating if we are currently in VR mode.
     */
    readonly isInVRMode: boolean;
    private onVrDisplayPresentChange;
    private onVRDisplayChanged;
    private moveButtonToBottomRight;
    private displayVRButton;
    private updateButtonVisibility;
    private _cachedAngularSensibility;
    /**
     * Attempt to enter VR. If a headset is connected and ready, will request present on that.
     * Otherwise, will use the fullscreen API.
     */
    enterVR(): void;
    /**
     * Attempt to exit VR, or fullscreen.
     */
    exitVR(): void;
    /**
     * The position of the vr experience helper.
     */
    /**
    * Sets the position of the vr experience helper.
    */
    position: Vector3;
    /**
     * Enables controllers and user interactions such as selecting and object or clicking on an object.
     */
    enableInteractions(): void;
    private readonly _noControllerIsActive;
    private beforeRender;
    private _isTeleportationFloor;
    /**
     * Adds a floor mesh to be used for teleportation.
     * @param floorMesh the mesh to be used for teleportation.
     */
    addFloorMesh(floorMesh: Mesh): void;
    /**
     * Removes a floor mesh from being used for teleportation.
     * @param floorMesh the mesh to be removed.
     */
    removeFloorMesh(floorMesh: Mesh): void;
    /**
     * Enables interactions and teleportation using the VR controllers and gaze.
     * @param vrTeleportationOptions options to modify teleportation behavior.
     */
    enableTeleportation(vrTeleportationOptions?: VRTeleportationOptions): void;
    private _onNewGamepadConnected;
    private _tryEnableInteractionOnController;
    private _onNewGamepadDisconnected;
    private _enableInteractionOnController;
    private _checkTeleportWithRay;
    private _checkRotate;
    private _checkTeleportBackwards;
    private _enableTeleportationOnController;
    private _createTeleportationCircles;
    private _displayTeleportationTarget;
    private _hideTeleportationTarget;
    private _rotateCamera;
    private _moveTeleportationSelectorTo;
    private _workingVector;
    private _workingQuaternion;
    private _workingMatrix;
    /**
     * Teleports the users feet to the desired location
     * @param location The location where the user's feet should be placed
     */
    teleportCamera(location: Vector3): void;
    private _convertNormalToDirectionOfRay;
    private _castRayAndSelectObject;
    private _notifySelectedMeshUnselected;
    /**
     * Sets the color of the laser ray from the vr controllers.
     * @param color new color for the ray.
     */
    changeLaserColor(color: Color3): void;
    /**
     * Sets the color of the ray from the vr headsets gaze.
     * @param color new color for the ray.
     */
    changeGazeColor(color: Color3): void;
    /**
     * Exits VR and disposes of the vr experience helper
     */
    dispose(): void;
    /**
     * Gets the name of the VRExperienceHelper class
     * @returns "VRExperienceHelper"
     */
    getClassName(): string;
}
